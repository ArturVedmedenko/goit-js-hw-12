{"version":3,"file":"index.js","sources":["../src/js/render-functions.js","../src/js/pixabay-api.js","../src/main.js"],"sourcesContent":["export const createGalleryCard = imgInfo => {\n  return `<li class=\"gallery-card\">\n     <a class=\"gallery-link\" href=\"${imgInfo.largeImageURL}\">\n       <img class=\"gallery-img\" src=\"${imgInfo.webformatURL}\" alt=\"${imgInfo.tags}\" width='360' height='200'; />\n       <div class=\"image-info\">\n         <p>Likes <span>${imgInfo.likes}</span></p>\n         <p>Views  <span>${imgInfo.views}</span></p>\n         <p>Comments  <span>${imgInfo.comments}</span></p>\n         <p>Downloads  <span>${imgInfo.downloads}</span></p>\n       </div>\n     </a>\n   </li>`;\n};\n","import axios from 'axios';\n\naxios.defaults.baseURL = `https://pixabay.com/api/`;\n\nexport const fetchPhotos = (searchQ, page) => {\n  const axiosOptions = {\n    params: {\n      key: '45727307-f96b67a5018b68fa33b524c91',\n      q: searchQ,\n      image_type: 'photo',\n      orientation: 'horizontal',\n      safesearch: 'true',\n      per_page: 15,\n      page: page,\n    },\n  };\n  return axios.get(``, axiosOptions);\n};\n","import iziToast from 'izitoast';\nimport SimpleLightbox from 'simplelightbox';\n\nimport { createGalleryCard } from './js/render-functions';\nimport { fetchPhotos } from './js/pixabay-api';\n\nconst searchFormEl = document.querySelector('.js-input-form');\nconst searcGalleryEl = document.querySelector('.js-gallery');\nconst searchLoaderEl = document.querySelector('.js-loader');\nconst searchBtnLoadMore = document.querySelector('.js-load-more');\n\nlet currentPage = 1;\nlet searchFormValue = '';\n\nconst gallery = new SimpleLightbox('.js-gallery a', {\n  captionDelay: 250,\n  captionPosition: 'bottom',\n  captionsData: 'alt',\n  overlayOpacity: 1,\n});\n\nsearchLoaderEl.classList.add('is-hidden');\n\nconst onSearchFormSubmit = async event => {\n  try {\n    event.preventDefault();\n\n    searchFormValue = searchFormEl.elements.user_query.value.trim();\n\n    if (searchFormValue === '') {\n      return;\n    }\n\n    currentPage = 1;\n    searchLoaderEl.classList.remove('is-hidden');\n    searcGalleryEl.innerHTML = '';\n\n    const response = await fetchPhotos(searchFormValue, currentPage);\n\n    if (response.data.total === 0) {\n      iziToast.error({\n        message:\n          'Sorry, there are no images matching your search query. Please try again!',\n        position: 'topRight',\n      });\n      searcGalleryEl.innerHTML = '';\n      searchBtnLoadMore.classList.add('is-hidden');\n      return;\n    }\n\n    const galleryCardTemplate = response.data.hits\n      .map(imgDetails => createGalleryCard(imgDetails))\n      .join('');\n\n    searcGalleryEl.innerHTML = galleryCardTemplate;\n    searchBtnLoadMore.classList.remove('is-hidden');\n    gallery.refresh();\n\n    if (Math.ceil(response.data.totalHits / 15) === currentPage) {\n      searchBtnLoadMore.classList.add('is-hidden');\n      iziToast.info({\n        message: \"We're sorry, but you've reached the end of search results\",\n        position: 'topRight',\n      });\n    }\n  } catch (err) {\n    iziToast.error({\n      message: err.message,\n      position: 'topRight',\n    });\n  } finally {\n    searchFormEl.reset();\n    searchLoaderEl.classList.add('is-hidden');\n  }\n};\n\nconst onLoadMoreBtnClick = async event => {\n  try {\n    currentPage++;\n\n    const response = await fetchPhotos(searchFormValue, currentPage);\n\n    const galleryCardTemplate = response.data.hits\n      .map(imgDetails => createGalleryCard(imgDetails))\n      .join('');\n\n    searcGalleryEl.insertAdjacentHTML('beforeend', galleryCardTemplate);\n    const smoothScroll = () => {\n      const { height } =\n        searcGalleryEl.firstElementChild.getBoundingClientRect();\n      window.scrollBy({\n        top: height * 2,\n        behavior: 'smooth',\n      });\n    };\n    gallery.refresh();\n    smoothScroll();\n\n    if (Math.ceil(response.data.totalHits / 15) === currentPage) {\n      searchBtnLoadMore.classList.add('is-hidden');\n      iziToast.info({\n        message: \"We're sorry, but you've reached the end of search results\",\n        position: 'topRight',\n      });\n    }\n  } catch (err) {\n    iziToast.error({\n      message:\n        'Sorry, there are no images matching your search query. Please try again!',\n      position: 'topRight',\n    });\n  } finally {\n    searchLoaderEl.classList.add('is-hidden');\n  }\n};\n\nsearchFormEl.addEventListener('submit', onSearchFormSubmit);\nsearchBtnLoadMore.addEventListener('click', onLoadMoreBtnClick);\n"],"names":["createGalleryCard","imgInfo","axios","fetchPhotos","searchQ","page","axiosOptions","searchFormEl","searcGalleryEl","searchLoaderEl","searchBtnLoadMore","currentPage","searchFormValue","gallery","SimpleLightbox","onSearchFormSubmit","event","response","iziToast","galleryCardTemplate","imgDetails","err","onLoadMoreBtnClick","smoothScroll","height"],"mappings":"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"}